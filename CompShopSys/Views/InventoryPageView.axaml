<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
			 xmlns:viewmodels="using:CompShopSys.ViewModels"
			 x:DataType="viewmodels:InventoryPageViewModel"
             x:Class="CompShopSys.Views.InventoryPageView"
			 xmlns:fa="using:FluentAvalonia.UI.Controls">
	
	<UserControl.Resources>
		<x:Double x:Key="DataGridSortIconMinWidth">0</x:Double>
	</UserControl.Resources>
	<UserControl.Styles>
		

		<Style Selector="DataGridColumnHeader">
			<Setter Property="FontSize" Value="8"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="FontFamily" Value="{DynamicResource DmMedium}"/>
			<Setter Property="Foreground" Value="#65758c"/>

			<Setter Property="Padding" Value="8"/>
			<Setter Property="HorizontalContentAlignment" Value="Center"/>
			
		</Style>
		<Style Selector="DataGrid TextBlock">
			<Setter Property="TextAlignment" Value="Center"/>
		</Style>
		<Style Selector="DataGridCell">
			<Setter Property="FontSize" Value="10"></Setter>
			<Setter Property="FontFamily" Value="{DynamicResource DmRegular}"></Setter>

		</Style>
		<Style Selector="Button">
			<Setter Property="Padding" Value="5"/>
			<Setter Property="FontSize" Value="12"/>
		</Style>

		<Style Selector="Button.danger">
			<Setter Property="Background" Value="#FF2C2C"/>
			<Setter Property="Foreground" Value="{DynamicResource PrimWhite}"/>
			<Setter Property="Padding" Value="10,5"/>
			<Setter Property="CornerRadius" Value="4"/>
		</Style>

		<Style Selector="TextBlock">
			<Setter Property="FontFamily" Value="{DynamicResource DmMedium}"/>
			<Setter Property="FontSize" Value="10"/>
			<Setter Property="Foreground" Value="{DynamicResource PrimBlack}"/>
			
		</Style>
		
		<Style Selector="TextBlock.UserForm">
			<Setter Property="FontFamily" Value="{DynamicResource DmMedium}"/>
			<Setter Property="FontSize" Value="10"/>
			<Setter Property="Foreground" Value="{DynamicResource PrimBlack}"/>
			<Setter Property="Margin" Value="0,0,0,8"></Setter>
			
		</Style>
		<Style Selector="TextBox.UserForm">
			<Setter Property="FontFamily" Value="{DynamicResource DmMedium}"/>
			<Setter Property="FontSize" Value="10"/>
			<Setter Property="Foreground" Value="{DynamicResource PrimBlack}"/>
			<Setter Property="Margin" Value="0,0,0,8"></Setter>
			<Setter Property="VerticalContentAlignment" Value="Center"/>
			<Setter Property="Padding" Value="5,0,0,0"/>
		</Style>

		
		

		<Style Selector="Button.success">
			<Setter Property="Background" Value="{DynamicResource SafeClr}"/>
			<Setter Property="Foreground" Value="{DynamicResource PrimWhite}"/>
			<Setter Property="FontFamily" Value="{DynamicResource DmMedium}"/>
			<Setter Property="Padding" Value="10,5"/>
			<Setter Property="CornerRadius" Value="4"/>
		</Style>

		
		<Style Selector="Button.primary">
			<Setter Property="Background" Value="{DynamicResource AccentClr}"/>
			<Setter Property="Foreground" Value="{DynamicResource PrimWhite}"/>
			<Setter Property="FontFamily" Value="{DynamicResource DmMedium}"/>
			<Setter Property="Padding" Value="10,5"/>
			<Setter Property="CornerRadius" Value="4"/>
		</Style>
		<Style Selector="Button.Clear">
			<Setter Property="Background" Value="{DynamicResource PrimWhite}"/>
			
			<Setter Property="FontFamily" Value="{DynamicResource DmMedium}"/>
			<Setter Property="Padding" Value="10,5"/>
			<Setter Property="CornerRadius" Value="4"/>
		</Style>
		
		<Style Selector="TextBox">
			<Setter	Property="Height" Value="20"></Setter> 
			
			<Setter	Property="MinHeight" Value="20"></Setter>
			<Setter Property="BorderBrush" Value="{DynamicResource Gray200}"/>
			<Setter Property="Padding" Value="0"/>
			<Setter Property="FontSize" Value="8"/>
			<Setter Property="CornerRadius" Value="3"></Setter>
	
		</Style>
		<Style Selector="TextBox">
			<Setter	Property="Height" Value="20"></Setter> 
			
			<Setter	Property="MinHeight" Value="20"></Setter>
			<Setter Property="BorderBrush" Value="{DynamicResource Gray200}"/>
			<Setter Property="Padding" Value="0"/>
			<Setter Property="FontSize" Value="8"/>
			<Setter Property="CornerRadius" Value="3"></Setter>
	
		</Style>
		
		<Style Selector="TextBox:pointerover">
			<Setter Property="BorderBrush" Value="{DynamicResource AccentClr}"/>
		</Style>

		<Style Selector="DataGridColumnHeader /template/ fa|FontIcon#SortIcon">
			<Setter Property="Foreground" Value="{DynamicResource PrimBlack}"/>
			<Setter Property="FontSize" Value="10"/>

		</Style>
		<Style Selector="DataGridColumnHeader:sortascending /template/ fa|FontIcon#SortIcon">
			
			<Setter Property="FontSize" Value="10"/>
		</Style>

		<Style Selector="DataGridColumnHeader:sortdescending /template/ fa|FontIcon#SortIcon">
			<Setter Property="FontSize" Value="10"/>

		</Style>

		
		
		

	</UserControl.Styles>

	<StackPanel Margin="20">
		<StackPanel Orientation="Horizontal"
					HorizontalAlignment="Stretch"
					Margin="0,0,0,15"
					Spacing="10">

			<TextBox Watermark="Search users..."
					Text="{Binding SearchQuery, Mode=TwoWay}"
					 Width="300"
					 FontSize="12"
					 HorizontalAlignment="Center"
					 Margin="20,0"
			
					/>

			<TextBlock Text="{Binding CurrentPage}" />
			<TextBlock Text=" / " />
			<TextBlock Text="{Binding TotalPages}" />
			<Button Content="Prev" Command="{Binding PreviousPageCommand}" />
			<Button Content="Next" Command="{Binding NextPageCommand}" />

			
		</StackPanel>

		<Grid ColumnDefinitions="3*,*">
			<Border BoxShadow="0 3 8 0 #3D000000"  Grid.Column="0" Margin="20"  CornerRadius="10" >
				<ScrollViewer VerticalScrollBarVisibility="Visible">
		<DataGrid 
				
				  
                  ItemsSource="{Binding PagedProducts}"
                  AutoGenerateColumns="False"
				  SelectedItem="{Binding SelectedProduct, Mode=TwoWay}"
                  VerticalAlignment="Center"
                  HorizontalAlignment="Stretch"
                  FontSize="16"
                  GridLinesVisibility="All"
                  FontFamily="{DynamicResource DmRegular}"
				IsReadOnly="True"
				   x:Name="UserGrid">
			

			<DataGrid.Columns>
				 <!-- Image Column -->
        <DataGridTemplateColumn Header="Image" Width="100">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Image Source="{Binding ImageUri}" Width="80" Height="80" Stretch="Uniform"/>
					
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
			  </DataGridTemplateColumn>
				<DataGridTextColumn Header="Id" Binding="{Binding Id}" IsVisible="True"  />
				<DataGridTextColumn Header="SKU" Binding="{Binding SKU}"   />
				<DataGridTextColumn Header="Product Name" Binding="{Binding ProductName}" Width="*"/>
				<DataGridTextColumn Header="Category " Binding="{Binding Category }" Width="*"/>
				<DataGridTextColumn Header="Brand  " Binding="{Binding Brand}" Width="*"/>
				<DataGridTextColumn Header="Price" Width="*">
					<DataGridTextColumn.Binding>
						<Binding Path="Price" StringFormat='â‚±{0:N2}' />
					</DataGridTextColumn.Binding>
				</DataGridTextColumn>
				<DataGridTextColumn Header="Quantity " Binding="{Binding Quantity }" Width="*"/>
				<DataGridTextColumn Header="Description  " Binding="{Binding Description }" Width="*"/>
				<DataGridTextColumn Header="Image   " Binding="{Binding ImagePath}" Width="*" IsVisible="False"/>
				
			</DataGrid.Columns>
		</DataGrid>
				</ScrollViewer>
					</Border>
			<Grid Grid.Column="1" >
				<Border  CornerRadius="10" 
						 BoxShadow="0 3 8 0 #3D000000"
						 MaxHeight="600"
						 VerticalAlignment="Center"
>
					<Grid RowDefinitions="Auto, Auto, Auto, Auto">
						
						<TextBlock Grid.Row="0"
								   Text="Enter Product Details"
								   HorizontalAlignment="Center"
								   Margin="0,10,0,0"
								   FontSize="14"
								   FontFamily="{DynamicResource DmMedium}"
								   Foreground="{DynamicResource PrimBlack}"/>

						<!-- User Input Fields -->
						<Grid Grid.Row="1"
							  Margin="10"
							  RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto"
							  ColumnDefinitions="Auto,*">
							<!-- Hidden Product ID -->
							

							<!-- SKU -->
							<TextBlock Text="SKU:" Classes="UserForm" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" />
							<TextBox Classes="UserForm" Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch" 
									 Text="{Binding Sku, Mode=TwoWay}" />

							<!-- Product Name -->
							<TextBlock Text="Product Name:" Classes="UserForm" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" />
							<TextBox Classes="UserForm" Grid.Row="1" Grid.Column="1" HorizontalAlignment="Stretch" 
									 Text="{Binding Name, Mode=TwoWay}" />

							<!-- Category -->
							<TextBlock Text="Category:" Classes="UserForm" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" />
							<TextBox Classes="UserForm" Grid.Row="2" Grid.Column="1" HorizontalAlignment="Stretch" 
									 Text="{Binding Category, Mode=TwoWay}" />

							<!-- Brand -->
							<TextBlock Text="Brand:" Classes="UserForm" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" />
							<TextBox Classes="UserForm" Grid.Row="3" Grid.Column="1" HorizontalAlignment="Stretch" 
									 Text="{Binding Brand, Mode=TwoWay}" />

							<!-- Price -->
							<TextBlock Text="Price:" Classes="UserForm" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center" />
							<NumericUpDown Classes="UserForm" HorizontalAlignment="Stretch"
										   Grid.Row="4"
										   Grid.Column="1"
										   FontSize="12"
										   Minimum="0"
										   Maximum="100000"
										   Increment="1"
										   Padding="5,0"
										   Value="{Binding Price, Mode=TwoWay}" />

							<!-- Quantity -->
							<TextBlock Text="Quantity:" Classes="UserForm" Grid.Row="5" Grid.Column="0" VerticalAlignment="Center" />
							<NumericUpDown
										FontSize="12"
										   Grid.Row="5"
										   Padding="5,0"
										   Grid.Column="1"
										   HorizontalAlignment="Stretch"
										   Minimum="0"
										   Maximum="1000"
										   Increment="1"
										   Value="{Binding Quantity, Mode=TwoWay}" >
								<NumericUpDown.Resources>
									
								</NumericUpDown.Resources>
								
							</NumericUpDown>

							<!-- Description -->
							<TextBlock Text="Description:" Classes="UserForm" Grid.Row="6" Grid.Column="0" VerticalAlignment="Center" />
							<TextBox Classes="UserForm" Grid.Row="6" Grid.Column="1" HorizontalAlignment="Stretch"
									 AcceptsReturn="True" MaxLines="3"
									 Text="{Binding Description, Mode=TwoWay}" />

							<!-- Image Path -->
							<TextBlock Text="Image Path:" Classes="UserForm" Grid.Row="7" Grid.Column="0" VerticalAlignment="Center" />

							<StackPanel Orientation="Horizontal" Grid.Row="7" Grid.Column="1" HorizontalAlignment="Stretch" Spacing="5">
    

								<Button Content="Browse..." 
										Command="{Binding AddPictureCommand}"
										CommandParameter="{Binding $self}"/>
							</StackPanel>
							
							<TextBox  Classes="UserForm" Grid.Row="8" Grid.Column="1" HorizontalAlignment="Stretch"  Text="{Binding Id, Mode=OneWay}" IsVisible="False"/>

						</Grid>

						<!-- Buttons Row -->
						<Grid Grid.Row="2" Margin="5,10" HorizontalAlignment="Stretch">
							<Grid.ColumnDefinitions>
								<!-- Define each column separately to make them all equally sized -->
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="*" />
							</Grid.ColumnDefinitions>
							<Button Height="25" FontSize="10" Classes="success" Grid.Column="0" Content="Add"  HorizontalAlignment="Stretch" Command="{Binding AddProductCommand}"  />
							<Button Height="25" FontSize="10" Classes="primary" Grid.Column="1" Content="Edit"  HorizontalAlignment="Stretch" Command="{Binding EditProductCommand}" /> 
							<Button Height="25" FontSize="10" Classes="danger" Grid.Column="2" Content="Delete" HorizontalAlignment="Stretch" Command="{Binding DeleteProductCommand}" />
						</Grid>
						<Grid  Grid.Row="3" Margin="5,0,5,10"  >
							<Button HorizontalAlignment="Stretch" Height="25" FontSize="11" Classes="Clear" Grid.Column="0" Content="Clear" Command="{Binding ClearUserFormCommand}" />
						</Grid>
						
	
					</Grid>
				</Border>
			</Grid>


			

		</Grid>
	
	</StackPanel>
</UserControl>
